# 股权风险溢价策略（ERP Strategy）

## 策略概述

股权风险溢价策略是一种基于股权风险溢价（Equity Risk Premium, ERP）指标的股债动态平衡策略。该策略通过ERP指标来判断股票相对债券的吸引力，动态调整股票和债券的仓位配比。

## 策略原理

### ERP计算公式

```
ERP = 盈利收益率(%) - 无风险利率(%)
盈利收益率 = (1 / PE) × 100%
```

其中：
- **盈利收益率**：使用A股全指的市盈率（PE）计算
- **无风险利率**：使用10年期国债收益率

### 仓位规则

策略根据ERP值动态调整股票仓位：

- **ERP ≤ 1**：股票仓位最低 = **10%**（股票吸引力低，债券更具优势）
- **ERP ≥ 4**：股票仓位最高 = **60%**（股票吸引力高，加大股票配置）
- **1 < ERP < 4**：离散化为固定档位

#### 仓位档位（POSITION_LEVELS）

策略使用 `POSITION_LEVELS` 参数控制仓位离散化程度，目前设置为 **3档**：

- `POSITION_LEVELS = 2`：只有 **10%** 和 **60%** 两个档位
- `POSITION_LEVELS = 3`：有 **10%**, **35%**, **60%** 三个档位
- `POSITION_LEVELS = 4`：有 **10%**, **26.67%**, **43.33%**, **60%** 四个档位
- 以此类推

档位计算公式：
```
档位间隔 = (60% - 10%) / (档位数 - 1)
第N档仓位 = 10% + N × 档位间隔  (N = 0, 1, 2, ...)
```

这种离散化设计的优势：
- 减少调仓次数，降低交易成本
- 避免因ERP小幅波动导致的频繁调仓
- 提供清晰的仓位管理规则

### 调仓规则

- **检查频率**：每6个月检查一次ERP值
- **调仓条件**：目标仓位与当前仓位差异超过1%时调仓
- **调仓方式**：立即调整至目标仓位

## 策略优势

1. **量化指标**：基于客观的ERP指标，避免主观判断
2. **动态平衡**：根据市场估值自动调整股债比例
3. **风险控制**：通过股债配置实现风险分散
4. **利息收益**：债券部分享受国债利率收益

## 数据来源

- **股票数据**：沪深300ETF基金（510300）
- **估值数据**：A股全指市盈率
- **债券数据**：10年期国债收益率

## 文件结构

```
erp-strategy/
├── calculations.ts        # 策略核心计算逻辑
├── calculations.test.ts   # 单元测试
├── page.tsx              # 策略展示页面
└── README.md             # 策略说明文档
```

## 使用方法

访问页面：`/backtest/erp-strategy`

### 参数配置

页面提供了以下可配置参数：

1. **ERP最小值** (默认: 1)
   - ERP小于等于此值时，采用最低股票仓位
   - 适当降低可以在市场估值较低时更早加仓

2. **ERP最大值** (默认: 4)
   - ERP大于等于此值时，采用最高股票仓位
   - 适当提高可以在市场估值较高时保持更高的股票仓位

3. **最低股票仓位** (默认: 10%)
   - 股票配置的最低比例
   - 可以根据风险偏好调整，偏保守可以降低

4. **最高股票仓位** (默认: 60%)
   - 股票配置的最高比例
   - 可以根据风险偏好调整，偏激进可以提高

5. **仓位档位数** (默认: 3档)
   - 从最低到最高仓位之间的离散档位数量
   - 2档：仅最低和最高两个仓位
   - 3档：最低、中间、最高三个仓位
   - 更多档位：提供更细粒度的仓位调整

### 操作步骤

1. 选择回测年限
2. 配置策略参数（或使用默认值）
3. 系统将自动：
   - 获取A股全指PE数据
   - 获取沪深300基金数据
   - 获取国债利率数据
   - 计算ERP并执行回测
   - 展示策略表现和详细数据

## 策略表现指标

回测结果包含以下关键指标：
- 累计收益率
- 年化收益率
- 最大回撤
- 最终仓位
- 交易次数
- 年度详情

